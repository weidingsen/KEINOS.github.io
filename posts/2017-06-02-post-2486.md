---
title: '[ポートの決め方] ポート番号の変更はセキュリティ向上につながるのか'
author: KEINOS
type: post
date: 2017-06-01T21:23:05+00:00
draft: true
private: true
url: /20170602_2486
page_type:
  - default
yuzo_related_post_metabox:
  - 'a:1:{s:21:"yuzo_disabled_related";N;}'
categories:
  - 未分類

---
> 「ピンポイントで狙われた場合は意味はない」が、一般的なポートの脆弱性を狙った「単純作業が好きなボットちゃん」や「単細胞のいたずら好きな坊ちゃん」には効果はあるので、一般向けでなければ変えるに越したことはない。

一般的なセキュリティの情報サイトやサーバーの建て方のサイトを見ると、「SSHやFTPなどのポートは変更しましょう」という情報を見かけます。しかし、世の中には「ポートスキャナー」という開いているポートをスキャンして見つけるソフトウェアが存在するので、**果たしてポートを変更することに意味はあるのか**という話しです。

結論から言ってしまえば、冒頭の通り「変えるに越したことはない」のですが、ポートを変えるのは「なぜか」を知る前にポートとは「何か」を掴んでおくと、色々と把握しやすいと思います。

### ポートやポート番号って何、どこにあるの？ {#outline__1}

インターネット（LANやWANを含むネット）には「ポート」という仕組みがあります。ネットが「海」だとすると、サーバが「国」、ポートが「港」、パケットが「船」というイメージです。

英語で港のことを「ポート」、空港を「エア・ポート」と言うのと同じで、「出入りする窓口」や「何かが移管・移動する」ことを指します。

余談ですが、プログラムやITではご存知の通り英語を多く使います。単語の意味を厳密に勉強して覚えようとする人を見かけますが、個人的には厳密な意味よりは「単語の意味の共通するイメージ」を持つ事が大事だと思います。

例えば、アプリをLinux用に**移植**することを「**Port** the app over to linux」と表現したりしますが、港を意味する「Port」として執着してしまうと「Linuxアプリに港する」とワケワカメな意味になってしまいます。逆に、ポートを「どこからか来たものを受け入れる（場所や行為）」というイメージであれば、移植という意味にもつながると思います。

このように、特にこの業界（プログラムやITの業界）では現実を比喩した、わかりづらい用語を使う事が多くクールという風潮よりは文化と言えるので、疑問に思ったら「<a href="http://e-words.jp/w/%E3%83%9D%E3%83%BC%E3%83%88.html" target="_blank" rel="noopener noreferrer">IT用語辞典</a>」だけでなく「<a href="http://eow.alc.co.jp/search?q=port" target="_blank" rel="noopener noreferrer">英辞郎</a>」などでも単語を検索して出て来た色々な訳（意味）を見て共通するイメージを持つと逆に把握しやすくなると思います。

さて、閑話休題。

「ポート」は「港」のようなものという話しに戻りますが、世間には同じ港でも「貿易」用の港、「軍事」用の秘密の港、「漁業」用の港、クルーザーなど「一般」用の港など、用途ごとに港があります。

サーバにも用途ごとにポートがあり、Webサイトを見るためのポート、セキュリティを使った通信のポート、FTPといったファイルを転送するポート、遠隔操作をするためのポートなどがあり、サーバーだけの特殊用途（個人用途）の秘密のポートもあったりします。

ネットを流れて来たデータは指定されたサーバのポートにデータを届け、あとはポート先でデータを処理するという意味では、現実もネットも同じです。

しかし、指定された港、例えば築地に行ったが閉鎖されていた場合や、言われた場所に行ったが港がなくて引き返すという事があるかもしれません。ネットでも同じで、これを「ポートが閉じていた」と言います。

また、指定された港にコンテナで貨物を運んだが、漁師用の漁港だったので規格があわず荷物を卸せないという事もあるかもしれません。これをネットでは「通信プトロコルがあわない」と言います。

つまり、場所と用途と規格がわからなければ（あわなければ）、積み荷を運んでも無駄骨になる意味では現実もネットも同じです。

### ポート番号はアドレスに指定する（暗黙の了解あり） {#outline__2}

ネットの場合、これらの指定をアドレス（URIもしくはURL）で指定します。「https://blog.keinos.com/」などで、厳密には「htts://blog.keinos.com:443/」と表現しますが、どちらでも同じページが表示されます。短い方がシンプルでわかりやすいというだけです。

「https://」の部分は規格（通信のルール）を指定していて、いわゆる「プロトコル」と呼ばれる指定です。具体的には「ハイパーテキスト（htmlなど）用の通信規格を暗号化して通信します」という事です。

次に「blog.keinos.com」の部分は、サーバーのアドレスで「keinos.com」というグループの「blog」という端末に届けろと意味します。当然、相手は機械なので番号（数値）で教えてあげなければいけないので、これを数値に変換するのがDNSサーバーというわけです。ターミナル（コマンド・プロンプト）などで\``ping blog.keinos.com`\`と打つと\`<span class="s1">64 bytes from xxx.xxx.xxx.xxx: icmp_seq=0 ttl=50 time=12.031 ms`などと表示されると思いますが、「xxx.xxx.xxx.xxx」が具体的なアドレスの数値になります。</span>

そして最後の「:443」が、今回話題の「ポート番号」になります。一般的なポートの場合は省略される事が多く、例えば今回の「https」というプトロコルを使う場合は「443番ポート」を使う事が通例なので、あえて指定しない場合は自動的に443番ポートに届けてくれます。

番号で指定しなくても用途（プロトコル）がわかれば常識的な判断でポートがわかるというのは、日本（.jp）の東京湾（サーバ）で魚を大量に卸す目的（プロトコル）なら、言わずもがな築地（ポート）でしょう、という解釈に似ています。

余談ですが、httpプトロコルという、暗号化通信を使わない一般的なWebサイト（「http://〜」から始まるアドレス）の場合は、指定しない限り80番ポートが自動的に使われます。試しに適当なアドレスの「http://〜.com/」の箇所を「http://〜.com<span class="bold-red">:80</span>/」に「:80」を加えてアクセスしてみてください。同じ内容が表示されると思います。

&nbsp;

#### 参考文献 {#outline__2_1}

<ul style="font-size: small;">
  <li>
    Does changing default port number actually increase security? &#8211; Serverfault @StackExchange<br /> <a href="https://serverfault.com/questions/316516/does-changing-default-port-number-actually-increase-security" target="_blank" rel="noopener noreferrer">https://serverfault.com/questions/316516/does-changing-default-port-number-actually-increase-security</a>
  </li>
  <li>
  </li>
</ul>